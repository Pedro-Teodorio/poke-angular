
<div class="container mt-4">
  <div class="row mb-4 align-items-center">
    <div class="col-md-5">
      <input 
        type="text" 
        class="form-control" 
        placeholder="Buscar Pokémon pelo nome..." 
        [value]="searchSubject.getValue()"
        (input)="onSearch($event)">
    </div>
    <div class="col-md-5">
      <select class="form-select" [value]="typeSubject.getValue()" (change)="onTypeChange($event)">
        <option value="">Todos os Tipos</option>
        <option *ngFor="let type of types$ | async" [value]="type.name">{{ type.name | titlecase }}</option>
      </select>
    </div>
    <div class="col-md-2 text-end">
        <button *ngIf="searchSubject.getValue() || typeSubject.getValue()" class="btn btn-outline-danger" (click)="clearFilters()">
            Limpar
        </button>
    </div>
  </div>

  <div *ngIf="pokemons$ | async as pokemons; else loading">
    <div *ngIf="pokemons.length > 0; else noResults" class="pokemon-grid">
      <app-pokemon-card *ngFor="let pokemon of pokemons" [pokemon]="pokemon"></app-pokemon-card>
    </div>
    <ng-template #noResults>
      <div class="alert alert-warning">Nenhum Pokémon encontrado.</div>
    </ng-template>
  </div>

  <div class="d-flex justify-content-center align-items-center my-4" *ngIf="!typeSubject.getValue() && !searchSubject.getValue()">
    <button class="btn btn-primary me-2" (click)="prevPage()" [disabled]="currentPage === 1">Anterior</button>
    <span>Página {{ currentPage }}</span>
    <button class="btn btn-primary ms-2" (click)="nextPage()" [disabled]="currentPage * limit >= totalPokemons">Próximo</button>
  </div>

  <ng-template #loading>
    <div class="text-center">
      <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
  </ng-template>
</div>